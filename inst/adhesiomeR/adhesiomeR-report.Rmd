---
title: "AdhesiomeR analysis report"
output:
  html_document:
    theme: simplex
    self_contained: true
    toc: true
---

<style>
img {
    max-width: none;

    /* other options:
    max-width: 200%;
    max-width: 700px;
    max-width: 9in;
    max-width: 25cm;
    etc
    */
}
</style>

```{r, results='asis', echo=FALSE, out.width = 900}

md_DT <- function(df) {
  datatable(df, extensions = 'FixedColumns', filter = "top", rownames = FALSE, style = "bootstrap",
            options = list(dom = 't', scrollX = TRUE, scrollCollapse = TRUE,
                           scrollY = 500))
}

cat(paste0("\n\n**Date**: ", Sys.time()), "\n\n")

cat("## Analyzed input files\n\n")
print(knitr::kable(data.frame(`File name` = genome_files, check.names = FALSE)))
cat("\n\n")

if(any(c("summary_table", "summary_plot", "count_table") %in% elements)) {
  cat("## Analysis on system level\n\n")
}

if(any(c("summary_table", "summary_plot") %in% elements)) {
  cat("### Percent of found genes\n\n")
}

if("summary_table" %in% elements) {
  cat("\n\n")
  summ_tab <- read.csv(paste0(outdir, "/summary_table.csv"), check.names = FALSE)
  md_DT(summ_tab)
}

if("summary_plot" %in% elements) {
  cat("\n\n")
  st <- read.csv(paste0(outdir, "/summary_table.csv"))
  cat(paste0("<center>\n\n![](", outdir, "/summary_plot.png){width='", 300+8*ncol(st),"px'}\n</center>"))
  #knitr::include_graphics(paste0(outdir, "/summary_plot.png"))
}

if("count_table" %in% elements) {
  cat("\n\n### Number of found genes\n\n")
  count_tab <- read.csv(paste0(outdir, "/count_table.csv"), check.names = FALSE)
  md_DT(count_tab)
}
```

```{r, results='asis', echo=FALSE, out.height=1800}
if(any(c("presence_table", "presence_plot") %in% elements)) {
  cat("\n\n## Analysis on gene level\n\n### Gene presence/absence")
}

if("presence_table" %in% elements) {
  cat("\n\n")
  presence_tab <- read.csv(paste0(outdir, "/presence_table.csv"), check.names = FALSE)
  md_DT(presence_tab)
}

if("presence_plot" %in% elements) {
  cat("\n\n")
  pt <- read.csv(paste0(outdir, "/presence_table.csv"))
  cat(paste0("<center>\n\n![](", outdir, "/presence_plot.png){height='", 200+5*ncol(pt),"px'}</center>"))
  #knitr::include_graphics(paste0(outdir, "/presence_plot.png"))
}

```


## About

This analysis was provided by [**adhesiomeR**](https://github.com/ksidorczuk/adhesiomeR)

```{r, echo=FALSE}
pander(sessionInfo())
```


